{% extends 'core/base.html' %}
{% block title %}Registrar Caso{% endblock %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3><i class="fas fa-file-alt"></i> Registrar Nuevo Caso</h3>
                </div>
                <div class="card-body">
                    <!-- Errores del formulario -->
                    {% if form.errors %}
                        <div class="alert alert-danger">
                            <strong>Corrige los siguientes errores:</strong>
                            <ul>
                                {% for field, errors in form.errors.items %}
                                    {% for error in errors %}
                                        <li><strong>{{ field|capfirst }}</strong>: {{ error }}</li>
                                    {% endfor %}
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}

                    <!-- Formulario -->
                    <form method="post">
                        {% csrf_token %}

                        <div class="row">
                            <div class="col-md-6">
                                <h5>Solicitante</h5>
                                <div class="mb-3">{{ form.applicant_name.label_tag }} {{ form.applicant_name }}</div>
                                <div class="mb-3">{{ form.applicant_id.label_tag }} {{ form.applicant_id }}</div>
                                <div class="mb-3">{{ form.applicant_phone.label_tag }} {{ form.applicant_phone }}</div>
                                <div class="mb-3">{{ form.applicant_email.label_tag }} {{ form.applicant_email }}</div>
                            </div>
                            <div class="col-md-6">
                                <h5>Involucrado</h5>
                                <div class="mb-3">{{ form.involved_name.label_tag }} {{ form.involved_name }}</div>
                                <div class="mb-3">{{ form.involved_id.label_tag }} {{ form.involved_id }}</div>
                            </div>
                        </div>

                        <h5>Detalles del Conflicto</h5>
                        <div class="mb-3">{{ form.conflict_description.label_tag }} {{ form.conflict_description }}</div>
                        <div class="mb-3">{{ form.location.label_tag }} {{ form.location }}</div>
                        <div class="mb-3">{{ form.conflict_type.label_tag }} {{ form.conflict_type }}</div>
                        {% if form.other_conflict_type %}
                            <div class="mb-3">{{ form.other_conflict_type.label_tag }} {{ form.other_conflict_type }}</div>
                        {% endif %}

                        <h5>Resolución</h5>
                        <div class="mb-3">{{ form.resolution_method.label_tag }} {{ form.resolution_method }}</div>
                        {% if form.other_resolution_method %}
                            <div class="mb-3">{{ form.other_resolution_method.label_tag }} {{ form.other_resolution_method }}</div>
                        {% endif %}

                        <h5>Observaciones</h5>
                        <div class="mb-3">{{ form.notes.label_tag }} {{ form.notes }}</div>

                        <!-- Consentimientos -->
                        <div class="mb-3 form-check">
                        {{ form.consentimiento_1 }}
                        <label class="form-check-label" for="{{ form.consentimiento_1.id_for_label }}">
                            Confirmo que la información proporcionada es verdadera.
                        </label>
                        </div>

                        <div class="mb-3 form-check">
                        {{ form.consentimiento_2 }}
                        <label class="form-check-label" for="{{ form.consentimiento_2.id_for_label }}">
                            Autorizo que mi caso sea gestionado conforme a la Ley y la normativa aplicable.
                        </label>
                        </div>

                        <div class="mt-4 text-center">
                            <button type="submit" class="btn btn-primary btn-lg me-3">
                                <i class="fas fa-save"></i> Registrar Caso
                            </button>
                            <a href="{% url 'core:judge_panel' %}" class="btn btn-outline-secondary btn-lg">
                                <i class="fas fa-times"></i> Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}